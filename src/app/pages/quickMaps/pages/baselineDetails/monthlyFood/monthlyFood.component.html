<ng-template #componentTemplate>
  <mat-tab-group mat-align-tabs="center" [(selectedIndex)]="selectedTab">
    <mat-tab label="Stacked Bar">
      <ngx-chartjs id="stacked-chart" *ngIf="chartDataStack" [data]="chartDataStack.data" [type]="chartDataStack.type"
        [options]="chartDataStack.options">
      </ngx-chartjs>
    </mat-tab>

    <mat-tab label="Line Chart">
      <ngx-chartjs id="line-chart" *ngIf="chartDataLine" [data]="chartDataLine.data" [type]="chartDataLine.type"
        [options]="chartDataLine.options">
      </ngx-chartjs>
    </mat-tab>

    <mat-tab label="Monthly Summary Data">
      <div class="bmgf-maps-nice-scrollbar">
        <table mat-table [dataSource]="dataSource" matSort>
          <ng-container [matColumnDef]="column" *ngFor="let column of displayedColumns">
            <th mat-header-cell *matHeaderCellDef mat-sort-header arrowPosition="before"> {{column}} </th>
            <td mat-cell *matCellDef="let element"> {{element[column]}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </mat-tab>

    <mat-tab label="Download">
      <app-download [chartDownloadPNG]="chartPNG" [chartDownloadPDF]="chartPDF" [dataArray]="dataSource?.data">
      </app-download>
    </mat-tab>
    <mat-tab label="About {{title}}">
      <div class="about-container">
        <h2>About {{title}}</h2>
        <p>This view presents the median monthly apparent intake of micronutrients, where the household data capture
          enables this disaggregation. Data are available to view graphically as stacked proportions (default view) or
          by absolute value. Data can also be viewed in tabular form. All outputs can be downloaded and exported.</p>
      </div>

    </mat-tab>
  </mat-tab-group>
</ng-template>

<ng-container *ngIf="(null != dialogData) else componentTemplate">
  <app-base-dialog [data]="dialogData" [title]="title">
    <ng-container *ngTemplateOutlet="componentTemplate"></ng-container>
  </app-base-dialog>
</ng-container>